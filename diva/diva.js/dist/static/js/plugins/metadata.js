import e from"../utils/parse-label-value.js";export default class t{constructor(e){this.core=e,this.toolbarIcon,this.toolbarSide="right",this.firstClick=!0,this.isVisible=!1}handleClick(){let t;let i=this.core.viewerState.manifest.metadata;if(this.firstClick){(t=document.createElement("div")).id="metadata-modal",t.className="diva-modal";let l=document.createElement("div"),a=document.createElement("h2");a.innerText="About this item",a.id="metadata-title";let n=document.createElement("button");n.innerHTML="&#10006",n.classList.add("close-button"),n.onclick=()=>{t.style.display="none",this.isVisible=!1};let d=document.createElement("div");d.id="metadata-content";let o=document.createElement("dl");for(let t=0,l=i.length;t<l;t++){let l=i[t],a=document.createElement("dt");a.innerHTML=e(l).label;let n=document.createElement("dd");n.innerHTML=e(l).value,o.appendChild(a),o.appendChild(n)}d.appendChild(o);let s=document.createElement("p"),c=document.createElement("a");c.setAttribute("target","_blank"),c.setAttribute("href",`${this.core.settings.objectData}`),c.innerHTML="IIIF Manifest",s.appendChild(c),d.appendChild(s),l.appendChild(n),l.appendChild(a),t.appendChild(l),t.appendChild(d),document.body.appendChild(t),this.firstClick=!1}else t=document.getElementById("metadata-modal");this.isVisible?(t.style.display="none",this.isVisible=!1):(t.style.display="block",this.isVisible=!0);let l=0,a=0,n=0,d=0;t.onmousedown=e=>{n=e.clientX,d=e.clientY,document.onmousemove=e=>{l=n-e.clientX,a=d-e.clientY,n=e.clientX,d=e.clientY,t.style.top=`${t.offsetTop-a}px`,t.style.left=`${t.offsetLeft-l}px`},document.onmouseup=()=>{document.onmouseup=null,document.onmousemove=null}}}createIcon(){if(!this.core.viewerState.manifest.metadata)return;let e=document.createElement("div");e.classList.add("diva-metadata-icon","diva-button");let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 20 20"),t.setAttribute("style","display: block; padding: 7%"),t.id=`${this.core.settings.selector}metadata-icon`;let i=document.createElementNS("http://www.w3.org/2000/svg","g");i.id=`${this.core.settings.selector}metadata-icon-glyph`,i.setAttribute("class","diva-toolbar-icon");let l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d","M5.379,0.681 L5.289,0.771 L5.255,0.736 C4.401,-0.118 2.98,-0.082 2.082,0.816 L1.827,1.07 C0.931,1.967 0.894,3.388 1.749,4.243 L1.783,4.277 L1.619,4.442 C0.846,5.214 0.818,6.441 1.559,7.18 L9.884,15.508 C10.626,16.248 11.851,16.22 12.626,15.447 L16.384,11.689 C17.156,10.916 17.185,9.69 16.445,8.95 L8.117,0.622 C7.377,-0.118 6.15,-0.091 5.379,0.681 L5.379,0.681 Z M4.523,5.108 C3.645,5.108 2.931,4.393 2.931,3.508 C2.931,2.627 3.645,1.911 4.523,1.911 C5.404,1.911 6.115,2.627 6.119,3.508 C6.115,4.395 5.404,5.108 4.523,5.108 L4.523,5.108 Z"),i.appendChild(l),t.appendChild(i),e.appendChild(t),e}}t.prototype.pluginName="metadata",t.prototype.isPageTool=!1,window.Diva.MetadataPlugin=t;