{% extends "base.jinja2" %}

{% block title %}
    <title>Source: {{ content.display_name }}</title>
{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ static('javascripts/lib/diva.js/css/diva.min.css') }}" />
{% endblock %}

{% block body %}
    <div class="row">
        <div class="twelve columns source-header">
            <h1>
                {{ content.display_name }}
            </h1>
            <h2>
                <a href="{{ content.archive.url }}">{{ content.archive.name }}</a>,
                {{ content.archive.city }}, {{ content.archive.country }}
            </h2>
            <p>
                <em>{{ content.type }}, {{ content.date_statement }}</em>
            </p>
        </div>
        <div class="four columns">
            <a href="{{ content.archive.url }}">
                <img src="{{ content.archive.logo }}" class="archive-header-logo"/>
            </a>
        </div>
    </div>
    <div class="row">
        <div id="tabs" class="sixteen columns source-tabs">
            <ul>
                <li><a class="tab active" href="#details">Details</a></li>

                {% if content.inventory or content.uninventoried %}
                <li><a class="tab" href="#inventory">Inventory</a></li>
                {% endif %}

                {% if content.public_images and request.user.is_authenticated() %}
                <li><a class="tab" href="#images">Images</a></li>
                {% endif %}

                {% if content.sets %}
                    <li><a class="tab" href="#sets">Sets</a></li>
                {% endif %}

                {% if content.catalogue_entries %}
                <li><a class="tab" href="#catalogue">Catalogue Entries</a></li>
                {% endif %}

                {% if content.bibliography %}
                <li><a class="tab" href="#bibliography">Bibliography</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
    <div id="tab-container" class="row">
        <div class="sixteen columns">
            {% include "website/source/source_detail_block.jinja2" %}

            {% if content.inventory or content.uninventoried %}
            {% include "website/source/source_inventory_block.jinja2" %}
            {% endif %}

            {% if content.public_images and request.user.is_authenticated() %}
            {% include "website/source/source_images_block.jinja2" %}
            {% endif %}

            {% if content.sets %}
            {% include "website/source/source_set_block.jinja2" %}
            {% endif %}

            {% if content.catalogue_entries %}
            {% include "website/source/source_catalogue_entries_block.jinja2" %}
            {% endif %}

            {% if content.bibliography %}
            {% include "website/source/source_bibliography_block.jinja2" %}
            {% endif %}
        </div>
    </div>

    {% include 'website/blocks/contribution.jinja2' %}

{% endblock %}

{% block scripts %}
    <script src="{{ static('javascripts/lib/jquery/jquery.min.js') }}" type="application/javascript"></script>
    <script src="{{ static('javascripts/lib/diva.js/js/diva.js') }}" type="application/javascript"></script>
    <script src="{{ static('javascripts/lib/diva.js/js/utils.js') }}" type="application/javascript"></script>
    <script src="{{ static('javascripts/lib/iiif-structure.js') }}" type="application/javascript"></script>
    <script src="{{ static('javascripts/lib/tabs.js') }}" type="application/javascript"></script>
    <script src="{{ static('javascripts/lib/goToPage.js') }}" type="application/javascript"></script>
    <script type="application/javascript">
        $("#tabs").tabs()
        window.onload = function()
        {
            var divaObj = $("#diva-wrapper").data('diva');
            $('#diva-wrapper').diva({
                    enableAutoTitle: false,
                    objectData: "{{ content.manifest_url }}",
                    enableIIIFPageData: true,
                    enableIIIFStructure: true
            });
        };
    </script>
{% endblock %}
