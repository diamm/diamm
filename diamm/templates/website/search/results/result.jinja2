{% macro icon_mapping(result_type) %}
    {% set icon_mapping = {'source': 'fa-book',
                           'archive': 'fa-university',
                           'organization': 'fa-users',
                           'person': 'fa-user',
                           'composition': 'fa-music'} %}
    {% set label_mapping = {'source': 'label-danger',
                            'archive': 'label-info',
                            'organization': 'label-warning',
                            'person': 'label-success',
                            'composition': 'label-primary'} %}
    <span class="label {{ label_mapping[result_type] }}"><span class="fa {{ icon_mapping[result_type] }}"> </span></span>
{% endmacro %}

{% macro item_info(result) %}
    {% if result.type == 'source' %}
        {% set source_description = [result.source_type_s, result.date_statement_s, result.measurements_s] %}
        {% for desc in source_description %}
            {% if desc %}
                {{ desc | capitalize }};
            {% endif %}
        {% endfor %}
    {% endif %}
{% endmacro %}


<div class="panel panel-default search-result">
    <div class="panel-body">
        <div class="container">
            <div class="row">
                <div class="col-md-9">
                    <h3 class="search-result-heading">
                        {{ icon_mapping(result.type) }}
                        <a href="{{ result.url }}">{{ result.name_s }}</a>
                    </h3>
                    <p>{{ item_info(result) }}</p>
                    {% if result.result_text %}
                        <p>{{ result.result_text | safe }}</p>
                    {% endif %}
                </div>
                {% if result.type == 'source' %}
                <div class="col-md-1">
                    <img src="http://placehold.it/150x200" alt="...">
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
