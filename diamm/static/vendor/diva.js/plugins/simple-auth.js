/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/build/plugins/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./source/js/plugins/simple-auth.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./source/js/plugins/simple-auth.js":
/*!******************************************!*\
  !*** ./source/js/plugins/simple-auth.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SimpleAuthPlugin; });\n/* harmony import */ var _utils_elt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/elt */ \"./source/js/utils/elt.js\");\n\n\n/**\n * A simple authentication plugin. \n * \n * Based on parts of IIIF-Auth API but with access control on the manifest. \n * \n * Requires IIIF-Auth API compliant Access Cookie Service (settings.simpleAuthLoginUrl)\n * and Access Token Service (settings.simpleAuthTokenUrl).\n * (see https://iiif.io/api/auth/1.0/)\n * \n * 1. Diva tries to load the manifest normally.\n * 2. If loading the manifest fails with an authorization error the plugin requests an access token.\n * 3. If loading the access token fails the plugin shows a login dialog and requests a new token.\n * 4. Diva tries to load the manifest with the access token.\n * 5. If loading the manifest fails with the access token goto 3.\n * 6. The images are loaded using the cookies set by the login domain.\n *  \n **/\nclass SimpleAuthPlugin\n{\n    constructor (core)\n    {\n        this.core = core;\n        this.authTokenUrl = core.settings.simpleAuthTokenUrl;\n        this.authLoginUrl = core.settings.simpleAuthLoginUrl;\n        this.authToken = null;\n        this.authError = null;\n        this.authTokenId = null;\n        this.serviceOrigin = this.getOrigin(this.authTokenUrl);\n        \n        // unset imageCrossOrigin because we need cookies on the image requests\n        core.publicInstance.options.imageCrossOrigin = null;\n\n        /*\n         * Manifest load error handler.\n         * \n         * Re-tries load with auth token or shows log in window. \n         */\n        Diva.Events.subscribe('ManifestFetchError', (response) => {\n            if (response.status === 401) {\n                if (this.authToken === null && this.authError === null) {\n                    // no auth token. let's get one\n                    this.requestAuthToken();\n                    // abort regular error handling\n                    throw new Error('Authentication required. Retrying with token.');\n                } else {\n                    // auth token doesn't work. try to log in again\n                    this.showLoginMessage(response);\n                    // abort regular error message\n                    throw new Error('Authentication required. Retrying with login.');\n                }\n            }\n        }, core.settings.ID);\n        \n        /*\n         * postMessage event handler.\n         * \n         * Receives data from IIIF-Auth token service in iframe.\n         * (https://iiif.io/api/auth/1.0/#interaction-for-browser-based-client-applications)\n         */\n        window.addEventListener('message', (event) => {\n            let origin = event.origin;\n            let data = event.data;\n            //console.debug(\"received postMessage!\", origin, data);\n            \n            if (origin !== this.serviceOrigin) return;\n            \n            if (data.messageId !== this.authTokenId) return;\n            \n            if (data.hasOwnProperty('accessToken')) \n            {\n                this.authToken = data.accessToken;\n                this.authError = null;\n                this.setAuthHeader(data.accessToken);\n                // reload manifest\n                this.core.publicInstance._loadOrFetchObjectData();\n            } \n            else if (data.hasOwnProperty('error')) \n            {\n                // handle error condition\n                //console.debug(\"ERROR getting access token!\");\n                this.authError = data.error;\n                this.authToken = null;\n                this.setAuthHeader(null);\n                // reload manifest to trigger login window\n                this.core.publicInstance._loadOrFetchObjectData();\n            }\n        });\n    }\n\n    /**\n     * Show login required message with button to open login window.\n     */\n    showLoginMessage (response)\n    {\n        const errorMessage = ['Unauthorized request. Error code: ' + response.status + ' ' + response.statusText];\n        errorMessage.push(\n            Object(_utils_elt__WEBPACK_IMPORTED_MODULE_0__[\"elt\"])('p', 'The document you are trying to access requires authentication.'),\n            Object(_utils_elt__WEBPACK_IMPORTED_MODULE_0__[\"elt\"])('p', 'Please ',\n                Object(_utils_elt__WEBPACK_IMPORTED_MODULE_0__[\"elt\"])('button', this.core.elemAttrs('error-auth-login', {'aria-label': 'Log in'}), 'log in')\n            ));\n        \n        this.core.showError(errorMessage);\n        \n        // connect login button\n        let selector = '#' + this.core.settings.selector;\n        document.querySelector(selector + 'error-auth-login').addEventListener('click', () =>\n        {\n            this.openLoginWindow();\n            // close error message\n            let errorElement =  document.querySelector(selector + 'error');\n            errorElement.parentNode.removeChild(errorElement);\n        });\n    }\n\n    /**\n     * Open new window with login url and re-request token after it closes.\n     */\n    openLoginWindow () \n    {\n        const loginWindow = window.open(this.authLoginUrl);\n        \n        if (!loginWindow) \n        {\n            console.error(\"login service window did not open :-(\");\n            return;\n        }\n        \n        // we need to wait for the window to close...\n        const poll = window.setInterval( () => {\n            if (loginWindow.closed) \n            {\n                window.clearInterval(poll);\n                // request a token with the new cookies\n                this.requestAuthToken();\n            }\n        }, 500);\n    }\n    \n    /**\n     * Request a new authentication token.\n     * \n     * Creates iframe with the token service url.\n     * Should trigger receiveMessage with the token.\n     */\n    requestAuthToken ()\n    {\n        const tokenFrameId = 'iiif-token-frame';\n        let tokenFrame = document.getElementById(tokenFrameId);\n        if (tokenFrame == null) \n        {\n            tokenFrame = document.createElement('iframe');\n            tokenFrame.id = tokenFrameId;\n            tokenFrame.setAttribute('style', 'display:none; width:30px; height:10px;');\n            document.body.appendChild(tokenFrame);\n        }\n\n        // use utime as token id\n        this.authTokenId = Date.now().toString();\n        // create url with id and origin\n        const tokenUrl = this.authTokenUrl + '?messageId=' + this.authTokenId + '&origin=' + this.getOrigin();\n        // load url in iframe\n        tokenFrame.src = tokenUrl;\n    }\n\n    /**\n     * Determine the postMessage-style origin for a URL.\n     */ \n    getOrigin (url) \n    {\n        let urlHolder = window.location;\n        if (url) \n        {\n            urlHolder = document.createElement('a');\n            urlHolder.href = url;\n        }\n        return urlHolder.protocol + '//' + urlHolder.hostname + (urlHolder.port ? ':'+urlHolder.port : '');\n    }\n    \n    /**\n     * Set the Authorization header.\n     */\n    setAuthHeader (token) \n    {\n        if (token !== null)\n        {\n            this.core.settings.requestHeaders['Authorization'] = 'Bearer ' + token;\n        }\n        else\n        {\n            delete this.core.settings.requestHeaders['Authorization'];\n        }\n    }\n}\n\nSimpleAuthPlugin.prototype.pluginName = 'simple-auth';\nSimpleAuthPlugin.prototype.isPageTool = false;\n\n/**\n * Make this plugin available in the global context\n * as part of the 'Diva' namespace.\n **/\n(function (global)\n{\n    global.Diva.SimpleAuthPlugin = SimpleAuthPlugin;\n})(window);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zb3VyY2UvanMvcGx1Z2lucy9zaW1wbGUtYXV0aC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NvdXJjZS9qcy9wbHVnaW5zL3NpbXBsZS1hdXRoLmpzPzYwZDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZWx0IH0gZnJvbSAnLi4vdXRpbHMvZWx0JztcblxuLyoqXG4gKiBBIHNpbXBsZSBhdXRoZW50aWNhdGlvbiBwbHVnaW4uIFxuICogXG4gKiBCYXNlZCBvbiBwYXJ0cyBvZiBJSUlGLUF1dGggQVBJIGJ1dCB3aXRoIGFjY2VzcyBjb250cm9sIG9uIHRoZSBtYW5pZmVzdC4gXG4gKiBcbiAqIFJlcXVpcmVzIElJSUYtQXV0aCBBUEkgY29tcGxpYW50IEFjY2VzcyBDb29raWUgU2VydmljZSAoc2V0dGluZ3Muc2ltcGxlQXV0aExvZ2luVXJsKVxuICogYW5kIEFjY2VzcyBUb2tlbiBTZXJ2aWNlIChzZXR0aW5ncy5zaW1wbGVBdXRoVG9rZW5VcmwpLlxuICogKHNlZSBodHRwczovL2lpaWYuaW8vYXBpL2F1dGgvMS4wLylcbiAqIFxuICogMS4gRGl2YSB0cmllcyB0byBsb2FkIHRoZSBtYW5pZmVzdCBub3JtYWxseS5cbiAqIDIuIElmIGxvYWRpbmcgdGhlIG1hbmlmZXN0IGZhaWxzIHdpdGggYW4gYXV0aG9yaXphdGlvbiBlcnJvciB0aGUgcGx1Z2luIHJlcXVlc3RzIGFuIGFjY2VzcyB0b2tlbi5cbiAqIDMuIElmIGxvYWRpbmcgdGhlIGFjY2VzcyB0b2tlbiBmYWlscyB0aGUgcGx1Z2luIHNob3dzIGEgbG9naW4gZGlhbG9nIGFuZCByZXF1ZXN0cyBhIG5ldyB0b2tlbi5cbiAqIDQuIERpdmEgdHJpZXMgdG8gbG9hZCB0aGUgbWFuaWZlc3Qgd2l0aCB0aGUgYWNjZXNzIHRva2VuLlxuICogNS4gSWYgbG9hZGluZyB0aGUgbWFuaWZlc3QgZmFpbHMgd2l0aCB0aGUgYWNjZXNzIHRva2VuIGdvdG8gMy5cbiAqIDYuIFRoZSBpbWFnZXMgYXJlIGxvYWRlZCB1c2luZyB0aGUgY29va2llcyBzZXQgYnkgdGhlIGxvZ2luIGRvbWFpbi5cbiAqICBcbiAqKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNpbXBsZUF1dGhQbHVnaW5cbntcbiAgICBjb25zdHJ1Y3RvciAoY29yZSlcbiAgICB7XG4gICAgICAgIHRoaXMuY29yZSA9IGNvcmU7XG4gICAgICAgIHRoaXMuYXV0aFRva2VuVXJsID0gY29yZS5zZXR0aW5ncy5zaW1wbGVBdXRoVG9rZW5Vcmw7XG4gICAgICAgIHRoaXMuYXV0aExvZ2luVXJsID0gY29yZS5zZXR0aW5ncy5zaW1wbGVBdXRoTG9naW5Vcmw7XG4gICAgICAgIHRoaXMuYXV0aFRva2VuID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdXRoRXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLmF1dGhUb2tlbklkID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZXJ2aWNlT3JpZ2luID0gdGhpcy5nZXRPcmlnaW4odGhpcy5hdXRoVG9rZW5VcmwpO1xuICAgICAgICBcbiAgICAgICAgLy8gdW5zZXQgaW1hZ2VDcm9zc09yaWdpbiBiZWNhdXNlIHdlIG5lZWQgY29va2llcyBvbiB0aGUgaW1hZ2UgcmVxdWVzdHNcbiAgICAgICAgY29yZS5wdWJsaWNJbnN0YW5jZS5vcHRpb25zLmltYWdlQ3Jvc3NPcmlnaW4gPSBudWxsO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIE1hbmlmZXN0IGxvYWQgZXJyb3IgaGFuZGxlci5cbiAgICAgICAgICogXG4gICAgICAgICAqIFJlLXRyaWVzIGxvYWQgd2l0aCBhdXRoIHRva2VuIG9yIHNob3dzIGxvZyBpbiB3aW5kb3cuIFxuICAgICAgICAgKi9cbiAgICAgICAgRGl2YS5FdmVudHMuc3Vic2NyaWJlKCdNYW5pZmVzdEZldGNoRXJyb3InLCAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dGhUb2tlbiA9PT0gbnVsbCAmJiB0aGlzLmF1dGhFcnJvciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBubyBhdXRoIHRva2VuLiBsZXQncyBnZXQgb25lXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdEF1dGhUb2tlbigpO1xuICAgICAgICAgICAgICAgICAgICAvLyBhYm9ydCByZWd1bGFyIGVycm9yIGhhbmRsaW5nXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQuIFJldHJ5aW5nIHdpdGggdG9rZW4uJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXV0aCB0b2tlbiBkb2Vzbid0IHdvcmsuIHRyeSB0byBsb2cgaW4gYWdhaW5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9naW5NZXNzYWdlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWJvcnQgcmVndWxhciBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQuIFJldHJ5aW5nIHdpdGggbG9naW4uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBjb3JlLnNldHRpbmdzLklEKTtcbiAgICAgICAgXG4gICAgICAgIC8qXG4gICAgICAgICAqIHBvc3RNZXNzYWdlIGV2ZW50IGhhbmRsZXIuXG4gICAgICAgICAqIFxuICAgICAgICAgKiBSZWNlaXZlcyBkYXRhIGZyb20gSUlJRi1BdXRoIHRva2VuIHNlcnZpY2UgaW4gaWZyYW1lLlxuICAgICAgICAgKiAoaHR0cHM6Ly9paWlmLmlvL2FwaS9hdXRoLzEuMC8jaW50ZXJhY3Rpb24tZm9yLWJyb3dzZXItYmFzZWQtY2xpZW50LWFwcGxpY2F0aW9ucylcbiAgICAgICAgICovXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsZXQgb3JpZ2luID0gZXZlbnQub3JpZ2luO1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgLy9jb25zb2xlLmRlYnVnKFwicmVjZWl2ZWQgcG9zdE1lc3NhZ2UhXCIsIG9yaWdpbiwgZGF0YSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChvcmlnaW4gIT09IHRoaXMuc2VydmljZU9yaWdpbikgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZGF0YS5tZXNzYWdlSWQgIT09IHRoaXMuYXV0aFRva2VuSWQpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoJ2FjY2Vzc1Rva2VuJykpIFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuYXV0aFRva2VuID0gZGF0YS5hY2Nlc3NUb2tlbjtcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhFcnJvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdXRoSGVhZGVyKGRhdGEuYWNjZXNzVG9rZW4pO1xuICAgICAgICAgICAgICAgIC8vIHJlbG9hZCBtYW5pZmVzdFxuICAgICAgICAgICAgICAgIHRoaXMuY29yZS5wdWJsaWNJbnN0YW5jZS5fbG9hZE9yRmV0Y2hPYmplY3REYXRhKCk7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSgnZXJyb3InKSkgXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIGVycm9yIGNvbmRpdGlvblxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5kZWJ1ZyhcIkVSUk9SIGdldHRpbmcgYWNjZXNzIHRva2VuIVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhFcnJvciA9IGRhdGEuZXJyb3I7XG4gICAgICAgICAgICAgICAgdGhpcy5hdXRoVG9rZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXV0aEhlYWRlcihudWxsKTtcbiAgICAgICAgICAgICAgICAvLyByZWxvYWQgbWFuaWZlc3QgdG8gdHJpZ2dlciBsb2dpbiB3aW5kb3dcbiAgICAgICAgICAgICAgICB0aGlzLmNvcmUucHVibGljSW5zdGFuY2UuX2xvYWRPckZldGNoT2JqZWN0RGF0YSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IGxvZ2luIHJlcXVpcmVkIG1lc3NhZ2Ugd2l0aCBidXR0b24gdG8gb3BlbiBsb2dpbiB3aW5kb3cuXG4gICAgICovXG4gICAgc2hvd0xvZ2luTWVzc2FnZSAocmVzcG9uc2UpXG4gICAge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBbJ1VuYXV0aG9yaXplZCByZXF1ZXN0LiBFcnJvciBjb2RlOiAnICsgcmVzcG9uc2Uuc3RhdHVzICsgJyAnICsgcmVzcG9uc2Uuc3RhdHVzVGV4dF07XG4gICAgICAgIGVycm9yTWVzc2FnZS5wdXNoKFxuICAgICAgICAgICAgZWx0KCdwJywgJ1RoZSBkb2N1bWVudCB5b3UgYXJlIHRyeWluZyB0byBhY2Nlc3MgcmVxdWlyZXMgYXV0aGVudGljYXRpb24uJyksXG4gICAgICAgICAgICBlbHQoJ3AnLCAnUGxlYXNlICcsXG4gICAgICAgICAgICAgICAgZWx0KCdidXR0b24nLCB0aGlzLmNvcmUuZWxlbUF0dHJzKCdlcnJvci1hdXRoLWxvZ2luJywgeydhcmlhLWxhYmVsJzogJ0xvZyBpbid9KSwgJ2xvZyBpbicpXG4gICAgICAgICAgICApKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29yZS5zaG93RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNvbm5lY3QgbG9naW4gYnV0dG9uXG4gICAgICAgIGxldCBzZWxlY3RvciA9ICcjJyArIHRoaXMuY29yZS5zZXR0aW5ncy5zZWxlY3RvcjtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvciArICdlcnJvci1hdXRoLWxvZ2luJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Mb2dpbldpbmRvdygpO1xuICAgICAgICAgICAgLy8gY2xvc2UgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgbGV0IGVycm9yRWxlbWVudCA9ICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yICsgJ2Vycm9yJyk7XG4gICAgICAgICAgICBlcnJvckVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlcnJvckVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVuIG5ldyB3aW5kb3cgd2l0aCBsb2dpbiB1cmwgYW5kIHJlLXJlcXVlc3QgdG9rZW4gYWZ0ZXIgaXQgY2xvc2VzLlxuICAgICAqL1xuICAgIG9wZW5Mb2dpbldpbmRvdyAoKSBcbiAgICB7XG4gICAgICAgIGNvbnN0IGxvZ2luV2luZG93ID0gd2luZG93Lm9wZW4odGhpcy5hdXRoTG9naW5VcmwpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFsb2dpbldpbmRvdykgXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJsb2dpbiBzZXJ2aWNlIHdpbmRvdyBkaWQgbm90IG9wZW4gOi0oXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSB3aW5kb3cgdG8gY2xvc2UuLi5cbiAgICAgICAgY29uc3QgcG9sbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCggKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGxvZ2luV2luZG93LmNsb3NlZCkgXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwocG9sbCk7XG4gICAgICAgICAgICAgICAgLy8gcmVxdWVzdCBhIHRva2VuIHdpdGggdGhlIG5ldyBjb29raWVzXG4gICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0QXV0aFRva2VuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFJlcXVlc3QgYSBuZXcgYXV0aGVudGljYXRpb24gdG9rZW4uXG4gICAgICogXG4gICAgICogQ3JlYXRlcyBpZnJhbWUgd2l0aCB0aGUgdG9rZW4gc2VydmljZSB1cmwuXG4gICAgICogU2hvdWxkIHRyaWdnZXIgcmVjZWl2ZU1lc3NhZ2Ugd2l0aCB0aGUgdG9rZW4uXG4gICAgICovXG4gICAgcmVxdWVzdEF1dGhUb2tlbiAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgdG9rZW5GcmFtZUlkID0gJ2lpaWYtdG9rZW4tZnJhbWUnO1xuICAgICAgICBsZXQgdG9rZW5GcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRva2VuRnJhbWVJZCk7XG4gICAgICAgIGlmICh0b2tlbkZyYW1lID09IG51bGwpIFxuICAgICAgICB7XG4gICAgICAgICAgICB0b2tlbkZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgICAgICAgICB0b2tlbkZyYW1lLmlkID0gdG9rZW5GcmFtZUlkO1xuICAgICAgICAgICAgdG9rZW5GcmFtZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6bm9uZTsgd2lkdGg6MzBweDsgaGVpZ2h0OjEwcHg7Jyk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRva2VuRnJhbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXNlIHV0aW1lIGFzIHRva2VuIGlkXG4gICAgICAgIHRoaXMuYXV0aFRva2VuSWQgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XG4gICAgICAgIC8vIGNyZWF0ZSB1cmwgd2l0aCBpZCBhbmQgb3JpZ2luXG4gICAgICAgIGNvbnN0IHRva2VuVXJsID0gdGhpcy5hdXRoVG9rZW5VcmwgKyAnP21lc3NhZ2VJZD0nICsgdGhpcy5hdXRoVG9rZW5JZCArICcmb3JpZ2luPScgKyB0aGlzLmdldE9yaWdpbigpO1xuICAgICAgICAvLyBsb2FkIHVybCBpbiBpZnJhbWVcbiAgICAgICAgdG9rZW5GcmFtZS5zcmMgPSB0b2tlblVybDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgdGhlIHBvc3RNZXNzYWdlLXN0eWxlIG9yaWdpbiBmb3IgYSBVUkwuXG4gICAgICovIFxuICAgIGdldE9yaWdpbiAodXJsKSBcbiAgICB7XG4gICAgICAgIGxldCB1cmxIb2xkZXIgPSB3aW5kb3cubG9jYXRpb247XG4gICAgICAgIGlmICh1cmwpIFxuICAgICAgICB7XG4gICAgICAgICAgICB1cmxIb2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICB1cmxIb2xkZXIuaHJlZiA9IHVybDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsSG9sZGVyLnByb3RvY29sICsgJy8vJyArIHVybEhvbGRlci5ob3N0bmFtZSArICh1cmxIb2xkZXIucG9ydCA/ICc6Jyt1cmxIb2xkZXIucG9ydCA6ICcnKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBBdXRob3JpemF0aW9uIGhlYWRlci5cbiAgICAgKi9cbiAgICBzZXRBdXRoSGVhZGVyICh0b2tlbikgXG4gICAge1xuICAgICAgICBpZiAodG9rZW4gIT09IG51bGwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuY29yZS5zZXR0aW5ncy5yZXF1ZXN0SGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAnICsgdG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jb3JlLnNldHRpbmdzLnJlcXVlc3RIZWFkZXJzWydBdXRob3JpemF0aW9uJ107XG4gICAgICAgIH1cbiAgICB9XG59XG5cblNpbXBsZUF1dGhQbHVnaW4ucHJvdG90eXBlLnBsdWdpbk5hbWUgPSAnc2ltcGxlLWF1dGgnO1xuU2ltcGxlQXV0aFBsdWdpbi5wcm90b3R5cGUuaXNQYWdlVG9vbCA9IGZhbHNlO1xuXG4vKipcbiAqIE1ha2UgdGhpcyBwbHVnaW4gYXZhaWxhYmxlIGluIHRoZSBnbG9iYWwgY29udGV4dFxuICogYXMgcGFydCBvZiB0aGUgJ0RpdmEnIG5hbWVzcGFjZS5cbiAqKi9cbihmdW5jdGlvbiAoZ2xvYmFsKVxue1xuICAgIGdsb2JhbC5EaXZhLlNpbXBsZUF1dGhQbHVnaW4gPSBTaW1wbGVBdXRoUGx1Z2luO1xufSkod2luZG93KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./source/js/plugins/simple-auth.js\n");

/***/ }),

/***/ "./source/js/utils/elt.js":
/*!********************************!*\
  !*** ./source/js/utils/elt.js ***!
  \********************************/
/*! exports provided: setAttributes, elt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setAttributes\", function() { return setDOMAttributes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"elt\", function() { return elt; });\n\n\n/**\n * Convenience function to create a DOM element, set attributes on it, and\n * append children. All arguments which are not of primitive type, are not\n * arrays, and are not DOM nodes are treated as attribute hashes and are\n * handled as described for setDOMAttributes. Children can either be a DOM\n * node or a primitive value, which is converted to a text node. Arrays are\n * handled recursively. Null and undefined values are ignored.\n *\n * Inspired by the ProseMirror helper of the same name.\n */\nfunction elt (tag)\n{\n    const el = document.createElement(tag);\n    const args = Array.prototype.slice.call(arguments, 1);\n\n    while (args.length)\n    {\n        const arg = args.shift();\n        handleEltConstructorArg(el, arg);\n    }\n\n    return el;\n}\n\nfunction handleEltConstructorArg (el, arg)\n{\n    if (arg == null)  // NB: == is correct;\n        return;\n\n    if (typeof arg !== 'object' && typeof arg !== 'function')\n    {\n        // Coerce to string\n        el.appendChild(document.createTextNode(arg));\n    }\n    else if (arg instanceof window.Node)\n    {\n        el.appendChild(arg);\n    }\n    else if (arg instanceof Array)\n    {\n        const childCount = arg.length;\n        for (let i = 0; i < childCount; i++)\n            handleEltConstructorArg(el, arg[i]);\n    }\n    else\n    {\n        setDOMAttributes(el, arg);\n    }\n}\n\n/**\n * Set attributes of a DOM element. The `style` property is special-cased to\n * accept either a string or an object whose own attributes are assigned to\n * el.style.\n */\nfunction setDOMAttributes (el, attributes)\n{\n    for (const prop in attributes)\n    {\n        if (!attributes.hasOwnProperty(prop))\n            continue;\n\n        if (prop === 'style')\n        {\n            setStyle(el, attributes.style);\n        }\n        else\n        {\n            el.setAttribute(prop, attributes[prop]);\n        }\n    }\n}\n\nfunction setStyle (el, style)\n{\n    if (!style)\n        return;\n\n    if (typeof style !== 'object')\n    {\n        el.style.cssText = style;\n        return;\n    }\n\n    for (const cssProp in style)\n    {\n        if (!style.hasOwnProperty(cssProp))\n            continue;\n\n        el.style[cssProp] = style[cssProp];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zb3VyY2UvanMvdXRpbHMvZWx0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL3V0aWxzL2VsdC5qcz9lZWFkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IHNldERPTUF0dHJpYnV0ZXMgYXMgc2V0QXR0cmlidXRlcyB9O1xuXG4vKipcbiAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIERPTSBlbGVtZW50LCBzZXQgYXR0cmlidXRlcyBvbiBpdCwgYW5kXG4gKiBhcHBlbmQgY2hpbGRyZW4uIEFsbCBhcmd1bWVudHMgd2hpY2ggYXJlIG5vdCBvZiBwcmltaXRpdmUgdHlwZSwgYXJlIG5vdFxuICogYXJyYXlzLCBhbmQgYXJlIG5vdCBET00gbm9kZXMgYXJlIHRyZWF0ZWQgYXMgYXR0cmlidXRlIGhhc2hlcyBhbmQgYXJlXG4gKiBoYW5kbGVkIGFzIGRlc2NyaWJlZCBmb3Igc2V0RE9NQXR0cmlidXRlcy4gQ2hpbGRyZW4gY2FuIGVpdGhlciBiZSBhIERPTVxuICogbm9kZSBvciBhIHByaW1pdGl2ZSB2YWx1ZSwgd2hpY2ggaXMgY29udmVydGVkIHRvIGEgdGV4dCBub2RlLiBBcnJheXMgYXJlXG4gKiBoYW5kbGVkIHJlY3Vyc2l2ZWx5LiBOdWxsIGFuZCB1bmRlZmluZWQgdmFsdWVzIGFyZSBpZ25vcmVkLlxuICpcbiAqIEluc3BpcmVkIGJ5IHRoZSBQcm9zZU1pcnJvciBoZWxwZXIgb2YgdGhlIHNhbWUgbmFtZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVsdCAodGFnKVxue1xuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXG4gICAgd2hpbGUgKGFyZ3MubGVuZ3RoKVxuICAgIHtcbiAgICAgICAgY29uc3QgYXJnID0gYXJncy5zaGlmdCgpO1xuICAgICAgICBoYW5kbGVFbHRDb25zdHJ1Y3RvckFyZyhlbCwgYXJnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVsdENvbnN0cnVjdG9yQXJnIChlbCwgYXJnKVxue1xuICAgIGlmIChhcmcgPT0gbnVsbCkgIC8vIE5COiA9PSBpcyBjb3JyZWN0O1xuICAgICAgICByZXR1cm47XG5cbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ29iamVjdCcgJiYgdHlwZW9mIGFyZyAhPT0gJ2Z1bmN0aW9uJylcbiAgICB7XG4gICAgICAgIC8vIENvZXJjZSB0byBzdHJpbmdcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYXJnKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIHdpbmRvdy5Ob2RlKVxuICAgIHtcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoYXJnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgQXJyYXkpXG4gICAge1xuICAgICAgICBjb25zdCBjaGlsZENvdW50ID0gYXJnLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZENvdW50OyBpKyspXG4gICAgICAgICAgICBoYW5kbGVFbHRDb25zdHJ1Y3RvckFyZyhlbCwgYXJnW2ldKTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgc2V0RE9NQXR0cmlidXRlcyhlbCwgYXJnKTtcbiAgICB9XG59XG5cbi8qKlxuICogU2V0IGF0dHJpYnV0ZXMgb2YgYSBET00gZWxlbWVudC4gVGhlIGBzdHlsZWAgcHJvcGVydHkgaXMgc3BlY2lhbC1jYXNlZCB0b1xuICogYWNjZXB0IGVpdGhlciBhIHN0cmluZyBvciBhbiBvYmplY3Qgd2hvc2Ugb3duIGF0dHJpYnV0ZXMgYXJlIGFzc2lnbmVkIHRvXG4gKiBlbC5zdHlsZS5cbiAqL1xuZnVuY3Rpb24gc2V0RE9NQXR0cmlidXRlcyAoZWwsIGF0dHJpYnV0ZXMpXG57XG4gICAgZm9yIChjb25zdCBwcm9wIGluIGF0dHJpYnV0ZXMpXG4gICAge1xuICAgICAgICBpZiAoIWF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkocHJvcCkpXG4gICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICBpZiAocHJvcCA9PT0gJ3N0eWxlJylcbiAgICAgICAge1xuICAgICAgICAgICAgc2V0U3R5bGUoZWwsIGF0dHJpYnV0ZXMuc3R5bGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKHByb3AsIGF0dHJpYnV0ZXNbcHJvcF0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRTdHlsZSAoZWwsIHN0eWxlKVxue1xuICAgIGlmICghc3R5bGUpXG4gICAgICAgIHJldHVybjtcblxuICAgIGlmICh0eXBlb2Ygc3R5bGUgIT09ICdvYmplY3QnKVxuICAgIHtcbiAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9IHN0eWxlO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBjc3NQcm9wIGluIHN0eWxlKVxuICAgIHtcbiAgICAgICAgaWYgKCFzdHlsZS5oYXNPd25Qcm9wZXJ0eShjc3NQcm9wKSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgIGVsLnN0eWxlW2Nzc1Byb3BdID0gc3R5bGVbY3NzUHJvcF07XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./source/js/utils/elt.js\n");

/***/ })

/******/ });